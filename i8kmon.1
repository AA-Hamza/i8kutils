.TH i8kmon 1 "17 June 2005" "Massimo Dal Zotto" Utilities
.SH "NAME"
.LP
i8kmon \- Monitor the cpu temperature and control the fans on Dell laptops
.SH "SYNTAX"
.LP
i8kmon [\fI<options>\fP]
.SH "DESCRIPTION"
.LP
The i8kmon daemon can be used to monitor the cpu temperature
and fan status on Dell laptops.
The program can be run in background as daemon or under X as
an applet which can be swallowed in the gnome panel.
.LP
By default the program monitors the cpu temperature but doesn't
do any automatic controls of the fan status accordingly to
user\-defined temperature thresholds because this may not be
needed if your laptop does already a good job with fans control.
The automatic control can be enabled manually with the
\fB\-\-auto\fR option.
.LP
The automatic fan control can also be turned on in the
control popup menu which is invoked by clicking with
the left mouse button on the temperature label.
The control menu has three items: Auto, which controls the
automatic fan control, Verbose, which prints status on stdout,
and Suspend, which closes the /proc/i8kfan file and suspends
the daemon to allow unloading the kernel module.
.LP
The user interface reports the current cpu temperature in
the top box and  in the two lower buttons the status of the
fans. On systems wiht only one fan the interface shows only
one fan button.
If a button's background becomes red it means that the
corresponding fan has a rotation speed lower than the
minimum expected speed and is probably stuck.
In this case proding it with a bent paper clip can often
cause it to become unstuck.
.LP
The fan buttons can also be used to manually control the
fan speeds.
Clicking on a fan button with the left mouse button will
cycle the selected fan between low speed, high speed and off.
Clicking with the middle button will set the fan to high speed
and clicking with the right button will switch the fan off.
Note however that both the BIOS and the daemon have their
own idea of what the fan speed should be and can sometimes
try to override the manual settings.
.SH "OPTIONS"
.LP
The program accepts the following command\-line options:
.TP
\fB\-a\fR, \fB\-\-auto\fR
Monitor cpu temperature and fan status and control
automatically the fans.
.TP
\fB\-na\fR, \fB\-\-noauto\fR
Monitor cpu temperature and fan status but don't control
automatically the fans. This is the default setting.
.TP
\fB\-d\fR, \fB\-\-daemon\fR
Run the program in daemon mode, i.e. without the user
interface.
.TP
\fB\-nd\fR, \fB\-\-nodaemon\fR
Don't run the program in daemon mode, i.e. open the user
interface. This is the default setting.
.TP
\fB\-nc\fR, \fB\-\-nouserconfig\fR
Don't attempt to source the ~/.i8kmon configfile, only /etc/i8kmon.conf.
.TP
\fB\-v\fR, \fB\-\-verbose\fR
Report hardware status and program actions on stdout.
.TP
\fB\-g\fR, \fB\-\-geometry\fR <\fIgeometry\fP>
Specifies the geometry of the applet window. Geometry should
be 24x24, 36x36 or 48x48 to fit the size of the gnome panel.
.TP
\fB\-t\fR, \fB\-\-timeout\fR <\fIseconds\fP>
Specifies the interval at which the daemon checks the
hardware status. Useful values are in the range of 1\-5
seconds. Default is 2 seconds.
.TP
\fB\-u\fR, \fB\-\-unit\fR C|F
Specifies the temperature display unit. Default is C (Celsius).
This option affects only the value shown in the applet. All other
temperature values are always in Celsius.
.SH "CONFIGURATION"
.LP
The program has builtin defaults to temperature thresholds but users can
specify their own settings in configuration files /etc/i8kmon.conf and
~/.i8kmon. It is also possible to specify values to others internal variables
that change the behavior of i8kmon.
.LP
The variables and values are as follows.
.TP
\fBset config(sysconfig)\fR   /etc/i8kmon.conf
System configuration file
.TP
\fBset config(userconfig)\fR  ~/.i8kmon
User configuration file
.TP
\fBset config(i8kfan)\fR  /usr/bin/i8kfan
i8kfan executable path
.TP
\fBset config(acpi)\fR    "acpi"
Filename of the apci executable
.TP
\fBset config(geometry)\fR    {}
Geometry of applet
.TP
\fBset config(use_conf)\fR    1
Set whether user configuration file must be read or not
.TP
\fBset config(auto)\fR    1
Set i8kmon behavior to auto
.TP
\fBset config(daemon)\fR  1
Load i8kmon as a daemon
.TP
\fBset config(verbose)\fR 0
Print verbose logs
.TP
\fBset config(timeout)\fR 5
Timeout
.TP
\fBset config(unit)\fR    C
Unit of measure
.TP
\fBset config(t_high)\fR  80
Maximum high temperature
.TP
\fBset config(min_speed)\fR   2000
Minimum speed
.LP
The daemon defines 4 states with different fan speeds ({0 0}, {1 0}, {1 1},
{2 2}) and for each state are defined the temperature thresholds which cause
the switching to a higher or lower state. Furthermore each state can have
different thresholds for operation on ac power or battery.
For example the following configuration:
.IP
set config(0) {{0 0}  \-1  60  \-1  65}
.br
set config(1) {{1 0}  50  70  55  75}
.br
set config(2) {{1 1}  60  80  65  85}
.br
set config(3) {{2 2}  70 128  75 128}
.LP
defines state 0 with both fans off, high threshold of 60 degrees (65 on
battery) and low threshold \-1, which is actually never reached since 0 is the
lowest state. When the high threshold is reached the program switches to state
1 (left low, right off) which has a high threshold of 70 degrees and a low
threshold of 50 degrees. If the temperature drops below 50 the program will
switch back to state 0, if it rises above 70 it will enter state 2, and so on.
For better operation the temperature ranges should be overlapping with an
hysteresis of at least 10 degrees, i.e. 1={50 70},2={60 80} is better than
1={50 70},2={70 80}. It must be remembered that the low threshold of state 0
must be \-1 and the high threshold of state 3 must be 128.
.LP
If the laptop has only one fan, it is better to specify a '-' instead of the fan
speed of the missing fan. For example:
.IP
set config(2) {{1 -}  60  80  65  85}
.LP
If you want to use it as a daemon you must create
the config file yourself. In this case, the \fB\-\-nouserconfig\fR option
can sometimes also help by limiting it to sourcing /etc/i8kmon.conf (and not
~/.i8kmon).
.SH "FILES"
.LP
\fI/proc/i8k\fP
.br
\fI/etc/i8kmon.conf\fP
.br
\fI/$HOME/.i8kmon\fP
.SH "AUTHORS"
.LP
Vitor Augusto <vitorafsr@gmail.com>
.br
Massimo Dal Zotto <dz@debian.org>
.SH "COPYRIGHT"
.LP
i8kmon and all the i8kutils programs , scripts and other files are
distributed under the GNU General Public License (GPL).
On Debian GNU/Linux systems, the complete text of the GNU General
Public License can be found in `/usr/share/common-licenses/GPL'.
.SH "SEE ALSO"
.LP
i8kctl(1), i8kbuttons(1)
